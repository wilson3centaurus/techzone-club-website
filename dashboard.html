<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechZone Admin Dashboard</title>
    <link rel="stylesheet" href="techzone.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Add all the admin styles from previous solution */
        .admin-container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .login-container { max-width: 400px; margin: 100px auto; padding: 30px; background: white; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .admin-dashboard { display: none; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .dashboard-nav { display: flex; margin-bottom: 20px; border-bottom: 1px solid #eee; }
        .nav-item { padding: 10px 20px; cursor: pointer; border-bottom: 3px solid transparent; }
        .nav-item.active { border-bottom-color: var(--msuas-secondary); color: var(--msuas-secondary); font-weight: bold; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .form-control { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 1rem; }
        textarea.form-control { min-height: 150px; resize: vertical; }
        .content-list { margin-top: 20px; }
        .content-item { background: white; padding: 15px; margin-bottom: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; justify-content: space-between; align-items: center; }
        .content-actions { display: flex; gap: 10px; }
        .btn-small { padding: 5px 10px; font-size: 0.8rem; }
        .image-preview { max-width: 200px; margin-top: 10px; }
        .image-preview img { max-width: 100%; border-radius: 5px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; padding: 20px; border-radius: 10px; max-width: 90%; max-height: 90%; overflow: auto; position: relative; }
        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 1.5rem; cursor: pointer; }
        .modal-image { max-width: 100%; max-height: 80vh; }
    </style>
</head>
<body>
    <!-- Same HTML structure as before for login and dashboard -->
    <div id="loginSection" class="login-container">
        <h2>TechZone Admin Login</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" class="form-control" required>
            </div>
            <button type="submit" class="btn btn-primary">Login</button>
        </form>
        <p class="login-note">Default credentials: admin / techzone2024</p>
    </div>

    <div id="adminDashboard" class="admin-dashboard">
        <!-- Same dashboard structure as before -->
        <div class="dashboard-header">
            <h2>TechZone Admin Dashboard</h2>
            <button id="logoutBtn" class="btn btn-secondary">Logout</button>
        </div>
        
        <div class="dashboard-nav">
            <div class="nav-item active" data-section="general">General</div>
            <div class="nav-item" data-section="about">About</div>
            <div class="nav-item" data-section="events">Events</div>
            <div class="nav-item" data-section="projects">Projects</div>
            <div class="nav-item" data-section="team">Team</div>
            <div class="nav-item" data-section="gallery">Gallery</div>
            <div class="nav-item" data-section="awards">Awards</div>
            <div class="nav-item" data-section="sponsors">Sponsors</div>
        </div>
        
        <!-- All the form sections from previous solution -->
        <!-- ... -->
    </div>

    <script>
        // Admin functionality that works with JSON file
        class AdminDashboard {
            constructor() {
                this.content = null;
                this.currentUser = null;
                this.init();
            }

            async init() {
                await this.loadContent();
                this.setupEventListeners();
            }

            async loadContent() {
                try {
                    const response = await fetch('data/content.json');
                    this.content = await response.json();
                    this.populateForms();
                } catch (error) {
                    console.error('Error loading content:', error);
                    alert('Error loading content. Please check if data/content.json exists.');
                }
            }

            async saveContent() {
                try {
                    // In a real static site, you would need a server endpoint to save the JSON
                    // For now, we'll provide a download link
                    const dataStr = JSON.stringify(this.content, null, 2);
                    const dataBlob = new Blob([dataStr], {type: 'application/json'});
                    
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(dataBlob);
                    link.download = 'content.json';
                    link.click();
                    
                    alert('Content saved! Download the JSON file and replace data/content.json on your server.');
                } catch (error) {
                    console.error('Error saving content:', error);
                    alert('Error saving content.');
                }
            }

            populateForms() {
                // Populate all forms with current content
                this.populateGeneralForm();
                this.populateAboutForm();
                this.loadEventsList();
                this.loadProjectsList();
                this.loadTeamList();
                this.loadGalleryList();
                this.loadAwardsList();
                this.loadSponsorsList();
            }

            populateGeneralForm() {
                document.getElementById('siteName').value = this.content.general.siteName;
                document.getElementById('clubMotto').value = this.content.general.clubMotto;
                document.getElementById('joinFormLink').value = this.content.general.joinFormLink;
                document.getElementById('clubLogo').value = this.content.general.clubLogo;
            }

            populateAboutForm() {
                document.getElementById('aboutText').value = this.content.about.text;
                document.getElementById('aboutImage').value = this.content.about.image;
                document.getElementById('handbookLink').value = this.content.about.handbookLink;
            }

            // ... all other population methods from previous solution

            setupEventListeners() {
                // Login form
                document.getElementById('loginForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleLogin();
                });

                // Logout button
                document.getElementById('logoutBtn').addEventListener('click', () => {
                    this.handleLogout();
                });

                // Navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.addEventListener('click', () => {
                        this.switchSection(item.getAttribute('data-section'));
                    });
                });

                // Form submissions
                document.getElementById('generalForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveGeneralSettings();
                });

                document.getElementById('aboutForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.saveAboutSection();
                });

                // ... all other event listeners from previous solution
            }

            handleLogin() {
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;

                // Simple authentication - in production, use proper authentication
                if (username === 'admin' && password === 'techzone2024') {
                    this.currentUser = username;
                    document.getElementById('loginSection').style.display = 'none';
                    document.getElementById('adminDashboard').style.display = 'block';
                } else {
                    alert('Invalid credentials!');
                }
            }

            handleLogout() {
                this.currentUser = null;
                document.getElementById('adminDashboard').style.display = 'none';
                document.getElementById('loginSection').style.display = 'block';
                document.getElementById('loginForm').reset();
            }

            switchSection(section) {
                // Update navigation
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector(`[data-section="${section}"]`).classList.add('active');

                // Update content sections
                document.querySelectorAll('.content-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(`${section}Section`).classList.add('active');
            }

            saveGeneralSettings() {
                this.content.general.siteName = document.getElementById('siteName').value;
                this.content.general.clubMotto = document.getElementById('clubMotto').value;
                this.content.general.joinFormLink = document.getElementById('joinFormLink').value;
                this.content.general.clubLogo = document.getElementById('clubLogo').value;
                
                this.saveContent();
            }

            saveAboutSection() {
                this.content.about.text = document.getElementById('aboutText').value;
                this.content.about.image = document.getElementById('aboutImage').value;
                this.content.about.handbookLink = document.getElementById('handbookLink').value;
                
                this.saveContent();
            }

            // ... all other save methods from previous solution
        }

        // Initialize admin dashboard
        document.addEventListener('DOMContentLoaded', () => {
            new AdminDashboard();
        });
    </script>
</body>
</html>